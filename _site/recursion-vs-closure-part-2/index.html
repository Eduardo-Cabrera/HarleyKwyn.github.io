<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Recursion Functional vs Closure Part II &#8211; Harley Kwyn Hacking</title>
<meta name="description" content="To understand recursion you must first understand recursion">
<meta name="keywords" content="recursion, algorithms, optimization, perfJS, JavaScript">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://harleykwyn.com/images/the-golden-ratio.jpg">

<meta name="twitter:title" content="Recursion Functional vs Closure Part II">
<meta name="twitter:description" content="To understand recursion you must first understand recursion">
<meta name="twitter:creator" content="@HarleyKwyn">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Recursion Functional vs Closure Part II">
<meta property="og:description" content="To understand recursion you must first understand recursion">
<meta property="og:url" content="http://harleykwyn.com/Recursion-vs-closure-part-2/">
<meta property="og:site_name" content="Harley Kwyn Hacking">





<link rel="canonical" href="http://harleykwyn.com/Recursion-vs-closure-part-2/">
<link href="http://harleykwyn.com/feed.xml" type="application/atom+xml" rel="alternate" title="Harley Kwyn Hacking Feed">
<link rel="author" href="https://plus.google.com/+KwynMeagher?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://harleykwyn.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://harleykwyn.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://harleykwyn.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://harleykwyn.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://harleykwyn.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://harleykwyn.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://harleykwyn.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://harleykwyn.com/images/apple-touch-icon-144x144-precomposed.png">




<style type="text/css">body {background-image:url(http://harleykwyn.com/images/ps_neutral.png);}</style>


<script src="https://apis.google.com/js/plusone.js"></script>
</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://harleykwyn.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://harleykwyn.com/images/avatar.jpg" alt="Kwyn Alice Meagher photo" class="author-photo">
					<h4>Kwyn Alice Meagher</h4>
					<p>Aka Harley Kwyn. Full-stack Software Engineer, biohacker, hacker in general</p>
				</li>
				<li><a href="http://harleykwyn.com/about/">Learn More</a></li>
				<li>
					<a href="http://github.com/harleykwyn"><i class="icon-github"></i> GitHub</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/harleykwyn"><i class="icon-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://twitter.com/HarleyKwyn"><i class="icon-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="mailto:kwyn.meagher@gmail.com"><i class="icon-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://plus.google.com/+KwynMeagher"><i class="icon-google-plus"></i> Google+</a>
				</li>
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://harleykwyn.com/tags/#JavaScript">JavaScript</a></li>
				<li><a a href="http://harleykwyn.com/tags/#algorithms">Algorithms</a></li>
				<li><a href="http://harleykwyn.com/tags/#GitHub">GitHub</a></li>
				<li><a href="http://harleykwyn.com/archive/">All Posts</a></li>
				<li><a href="http://harleykwyn.com/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="entry-image"><img src="http://harleykwyn.com/images/the-golden-ratio.jpg" alt="Recursion Functional vs Closure Part II">
    
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://harleykwyn.com/Recursion-vs-closure-part-2/" rel="bookmark" title="Recursion Functional vs Closure Part II">Recursion Functional vs Closure Part II</a></h1>
        
        <h2>January 28, 2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <h2 id="toc_0">Background</h2>

<p>To continue our discussion from my <a href="http://harleykwyn.com/Recursion-closure-and-iteration/">previous post</a> I&#39;ve decided to run another head ot head test with a functional recursive implimentation and a closure scope recursive implimentation.</p>

<p>A quick review of the differences between implimentations</p>

<ol>
<li><a href="http://en.wikipedia.org/wiki/Recursion">Recursion</a> with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures">closure variable</a> to keep track of answers </li>
<li><a href="http://en.wikipedia.org/wiki/Recursion#Functional_recursion">Functional recursion</a> which passes in all variables with each recursive call.</li>
<li>Iteration which uses a while loop to iterate over all of the possibilities. We&#39;ll leave this one out of the fight for now.</li>
</ol>

<h2 id="toc_1">Implementations</h2>

<p>Ideally both of the following implementations should be executed in 0(n) time. This is mainly to test V8&#39;s (chrome&#39;s javascript engine) handling of functional recursion and closure scope recursion. </p>

<p>Each of these implmentations references a javascript object with keys for all of the numbers and their associated letters.</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">phoneDigitsToLetters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
  <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
  <span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;ABC&#39;</span><span class="p">,</span>
  <span class="mi">3</span><span class="o">:</span> <span class="s1">&#39;DEF&#39;</span><span class="p">,</span>
  <span class="mi">4</span><span class="o">:</span> <span class="s1">&#39;GHI&#39;</span><span class="p">,</span>
  <span class="mi">5</span><span class="o">:</span> <span class="s1">&#39;JKL&#39;</span><span class="p">,</span>
  <span class="mi">6</span><span class="o">:</span> <span class="s1">&#39;MNO&#39;</span><span class="p">,</span>
  <span class="mi">7</span><span class="o">:</span> <span class="s1">&#39;PQRS&#39;</span><span class="p">,</span>
  <span class="mi">8</span><span class="o">:</span> <span class="s1">&#39;TUV&#39;</span><span class="p">,</span>
  <span class="mi">9</span><span class="o">:</span> <span class="s1">&#39;WXYZ&#39;</span>
<span class="p">};</span>
</code></pre></div>

<h3 id="toc_2">Functional Recursion</h3>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">telephoneWordsFunctional</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">digitString</span><span class="p">,</span> <span class="nx">word</span><span class="p">,</span> <span class="nx">possibleWords</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">possibleWords</span> <span class="o">=</span> <span class="nx">possibleWords</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">digitString</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">possibleWords</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">word</span> <span class="o">=</span> <span class="nx">word</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span> <span class="nx">phoneDigitsToLetters</span><span class="p">[</span><span class="nx">digitString</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>
  <span class="nx">digitString</span> <span class="o">=</span> <span class="nx">digitString</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">letters</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">++</span><span class="p">){</span>
    <span class="nx">telephoneWordsFunctional</span><span class="p">(</span><span class="nx">digitString</span><span class="p">,</span> <span class="nx">word</span> <span class="o">+</span> <span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">possibleWords</span><span class="p">);</span>
  <span class="p">}</span> 
  <span class="k">return</span> <span class="nx">possibleWords</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

<h3 id="toc_3">Closure Recursion</h3>

<p>The key difference here is the subroutine we&#39;re wrapping into line 3. This places the possibleWords array outside the scope of the subroutine function which behaves much like the functional recusrive implimentation above.</p>

<p>This allows the v8 javascript engine to clean up the function calls after they&#39;re finished instead of leaving them open. Scopes in Javascript will not close until they are no longer referenced and if we have to contiually pass all of our arguments along, v8 will have to keep all of those instances open. <a href="https://medium.com/p/8eee8afb41df">This</a> blog post explains this well and how to address this if you want to continue to use functional programming.</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">telephoneWordsClosure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">digitString</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">possibleWords</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">subroutine</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">digitString</span><span class="p">,</span> <span class="nx">word</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">digitString</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
      <span class="nx">possibleWords</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">newWord</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span> <span class="nx">phoneDigitsToLetters</span><span class="p">[</span><span class="nx">digitString</span><span class="p">[</span><span class="nx">index</span><span class="p">]]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">letters</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">++</span><span class="p">){</span>
      <span class="nx">newWord</span> <span class="o">=</span> <span class="nx">word</span> <span class="o">+</span> <span class="nx">letters</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">subroutine</span><span class="p">(</span><span class="nx">digitString</span><span class="p">,</span> <span class="nx">newWord</span><span class="p">,</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">};</span>
  <span class="nx">subroutine</span><span class="p">(</span><span class="nx">digitString</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">possibleWords</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

<h2 id="toc_4">PerfJS test results</h2>

<p><img src="/images/jsPerfTable.png" alt="jsPerf Table"></p>

<p><img src="/images/jsPerfBarChart.png" alt="jsPerf Bar Chart"></p>

<p>On my computer using chrome the results of the <a href="http://jsperf.com/permute-telephone-letters">perfJS spec</a> I created show that once again the recursive solution is the most optimal. Closure recursion is approximately as the same difference as last time. </p>

<p>I encourage you to run <a href="http://jsperf.com/tree-map-kwyn">my perfJS</a> on your own computer and in different browsers and report back to me what you find!</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://harleykwyn.com/tags/#recursion" title="Pages tagged recursion" class="tag">recursion</a><a href="http://harleykwyn.com/tags/#algorithms" title="Pages tagged algorithms" class="tag">algorithms</a><a href="http://harleykwyn.com/tags/#optimization" title="Pages tagged optimization" class="tag">optimization</a><a href="http://harleykwyn.com/tags/#perfJS" title="Pages tagged perfJS" class="tag">perfJS</a><a href="http://harleykwyn.com/tags/#JavaScript" title="Pages tagged JavaScript" class="tag">JavaScript</a></span>
        <span><a href="http://harleykwyn.com/Recursion-vs-closure-part-2/" rel="bookmark" title="Recursion Functional vs Closure Part II">Recursion Functional vs Closure Part II</a> was published on <span class="entry-date date published updated"><time datetime="2014-01-28T00:00:00+00:00">January 28, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-01-28">01/28/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://harleykwyn.com/about/" title="About Kwyn Alice Meagher">Kwyn Alice Meagher</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://harleykwyn.com/Recursion-vs-closure-part-2/" title="Share on Facebook"><span class="count"><i class="icon-facebook-sign"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://harleykwyn.com/Recursion-vs-closure-part-2/" title="Share on Twitter"><span class="count"><i class="icon-twitter-sign"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://harleykwyn.com/Recursion-vs-closure-part-2/" title="Share on Google Plus"><span class="count"><i class="icon-google-plus-sign"></i> +1</span></a></li>
          </ul>
          <!-- google comment attempted to be added here attempt -->
        </div><!-- /.social-share -->
      </footer>
      <div id="comments"></div>
    </div><!-- /.entry-content -->
   
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://harleykwyn.com/slick-jekyll-themes-and-github-pages/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://harleykwyn.com/chrome-devtools-extensions-hello-world/" title="Hello World App for Chrome Devtools Extensions">Hello World App for Chrome Devtools Extensions</a></h3>
          <p>You can do what? <a href="http://harleykwyn.com/chrome-devtools-extensions-hello-world/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://harleykwyn.com/so-you-want-to-be-a-kaggle-wizard/" title="So You Want to be a Kaggle Wizard">So You Want to be a Kaggle Wizard</a></h4>
            <span>Published on February 27, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://harleykwyn.com/machine-learning-work-flow/" title="Machine Learning Work Flow for Hackers">Machine Learning Work Flow for Hackers</a></h4>
            <span>Published on February 27, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 <a href="https://plus.google.com/+KwynMeagher?rel=author"> Kwyn Alice Meagher </a>. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">HPSTR Theme</a>. </span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://harleykwyn.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://harleykwyn.com/assets/js/scripts.min.js"></script>

<script type="text/javascript">
    // /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = ''; // required: replace example with your forum shortname

    // /* * * DON'T EDIT BELOW THIS LINE * * */
    // (function() {
    //     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    //     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    //     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    // })();

    // /* * * DON'T EDIT BELOW THIS LINE * * */
    // (function () {
    //     var s = document.createElement('script'); s.async = true;
    //     s.type = 'text/javascript';
    //     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    //     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    // }());

</script>
<!-- <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
 -->
	        
 <script>
      var width = $(".entry-content").width() - 20;
      gapi.comments.render('comments', {
          href: window.location,
          width: width,
          first_party_property: 'BLOGGER',
          view_type: 'FILTERED_POSTMOD'
      });
  </script>
</body>
</html>
