<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>So You Want to be a Kaggel Wizard &#8211; Harley Kwyn Hacking</title>
<meta name="description" content="Learn ALL the things">
<meta name="keywords" content="machine learning, python, image processing">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://www.harleykwyn.com/images/blur07.jpg">

<meta name="twitter:title" content="So You Want to be a Kaggel Wizard">
<meta name="twitter:description" content="Learn ALL the things">
<meta name="twitter:creator" content="@HarleyKwyn">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="So You Want to be a Kaggel Wizard">
<meta property="og:description" content="Learn ALL the things">
<meta property="og:url" content="http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/">
<meta property="og:site_name" content="Harley Kwyn Hacking">





<link rel="canonical" href="http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/">
<link href="http://www.harleykwyn.com/feed.xml" type="application/atom+xml" rel="alternate" title="Harley Kwyn Hacking Feed">
<link rel="author" href="https://plus.google.com/+KwynMeagher?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://www.harleykwyn.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://www.harleykwyn.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://www.harleykwyn.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://www.harleykwyn.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://www.harleykwyn.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.harleykwyn.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.harleykwyn.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.harleykwyn.com/images/apple-touch-icon-144x144-precomposed.png">




<style type="text/css">body {background-image:url(http://www.harleykwyn.com/images/ps_neutral.png);}</style>


<script src="https://apis.google.com/js/plusone.js"></script>
</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://www.harleykwyn.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://www.harleykwyn.com/images/avatar.jpg" alt="Kwyn Alice Meagher photo" class="author-photo">
					<h4>Kwyn Alice Meagher</h4>
					<p>Aka Harley Kwyn. Hack Reactor Student, biohacker, hacker in general</p>
				</li>
				<li><a href="http://www.harleykwyn.com/about/">Learn More</a></li>
				<li>
					<a href="mailto:kwyn.meagher@gmail.com"><i class="icon-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/HarleyKwyn"><i class="icon-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://plus.google.com/+KwynMeagher"><i class="icon-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/harleykwyn"><i class="icon-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/harleykwyn"><i class="icon-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://www.harleykwyn.com/tags/#JavaScript">JavaScript</a></li>
				<li><a a href="http://www.harleykwyn.com/tags/#algorithms">Algorithms</a></li>
				<li><a href="http://www.harleykwyn.com/tags/#GitHub">GitHub</a></li>
				<li><a href="http://www.harleykwyn.com/archive/">All Posts</a></li>
				<li><a href="http://www.harleykwyn.com/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="entry-image"><img src="http://www.harleykwyn.com/images/blur07.jpg" alt="So You Want to be a Kaggel Wizard">
    
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/" rel="bookmark" title="So You Want to be a Kaggel Wizard">So You Want to be a Kaggel Wizard</a></h1>
        
        <h2>February 27, 2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <h1 id="toc_0">Background</h1>

<p>My group at Hack Reactor decided for a short project we would attempt to tackle a Kaggel competition. Specifically the <a href="http://www.kaggle.com/c/galaxy-zoo-the-galaxy-challenge">GalaxyZoo Kaggel competition</a>. A daunting challenge considering 1. we are new to machine learning. 2. some of us are new to programming and 3. we only have two weeks to work on this specific project.</p>

<p>Digging into researching and reading the forums we found some helpful information and actually found this <a href="http://www.kaggle.com/c/galaxy-zoo-the-galaxy-challenge/forums/t/6803/beating-the-benchmark">post</a>.</p>

<p>After much effort trying to execute the supposed 20 minute solution]( referenced on the GalaxyZoo Kaggel competition forums I&#39;ve decided to help complete newbies get up and running with python and the appropriate libraries to execute this solution.</p>

<p><strong>If you want to cheat, you can jump down to the bottom of the page for the full code but it&#39;d be better if you could try to follow along.</strong></p>

<p><em>note: I this is designed for a Unix/MacOSX based setup</em></p>

<h1 id="toc_1">Overview</h1>

<p>According to the post for beating the benchmark: </p>

<blockquote>
<p>Step 1 : for all images in train and test, resize to 50x50, and vectorize to 1-D array.</p>

<p>Step 2: Run the RandomForestRegression from scikit-learn on the train and test set with 10 estimators.</p>

<p>Step 3: Submit Results</p>

<p>Step 4: You have beaten the benchmark</p>
</blockquote>

<p>Problem with this is that that it assumes you know how to do all of this with a large set of data already. So I&#39;m going to show you how to set up the environment for using Python, Sci-kit Image and Sci-kit learn.  You may want to check out the <a href="">scikit-image</a> and <a href="http://scikit-learn.org/stable/documentation.html">scikit-learn</a> documentation.</p>

<h2 id="toc_2">Snake Charming (Installing Anaconda)</h2>

<p><a href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> is an awesome python package that contains all of the awesome tools we&#39;ll be using and many others. It&#39;s simpler to run the graphic installer provided by Anaconda and following their instillations instruction rather than writing out all the install commands for every dependency. Be sure to install it for your current user.</p>

<p>You should now be able to run the command <code>spyder</code> to open up a python editor.</p>

<h1 id="toc_3">Step 1.</h1>

<h2 id="toc_4">Create a python file</h2>

<p>Get started by creating an empty python file named <code>MyFirstForest.py</code> and open it up in your favorite editor. If you don&#39;t have one I suggest spyder as mentioned previously or <a href="http://www.sublimetext.com/">Sublime Text 2</a>.</p>

<h2 id="toc_5">Getting the images</h2>

<p>If you want to do this with the kaggel competition data you can down load it <a href="http://www.kaggle.com/c/galaxy-zoo-the-galaxy-challenge/data">here</a> after you make an account and agree to the competition terms. You&#39;ll want to download all of the files and extract them into you workspace directory. Unzipping the image files can take some time.</p>

<p>The very first thing you&#39;ll need to do is get a hold of the images which requires the <code>os</code> module to access the file system so start by typing </p>

<div class="highlight"><pre><code class="python"><span class="kn">import</span> <span class="nn">os</span>
</code></pre></div>

<p>at the top of the file. This will import the os utility that allows us to access the file system and other parts of the operating system.</p>

<p>Leave a bit of space and type the following code to actually loop through the <code>trainingImages</code> directory and read each of the images into a variable that we can manipulate. </p>

<p>You&#39;ll also need to initialize an empty list that will hold all our training features. I aptly named mine <code>trainingFeatures</code></p>

<div class="highlight"><pre><code class="python"><span class="c">#note that this path is absolute path to your training image directory</span>
<span class="n">pathToTrainingImages</span> <span class="o">=</span> <span class="s">&#39;/Users/kwyn/workspace/images_training_rev1/&#39;</span> 
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pathToTrainingImages</span><span class="p">):</span>   
    <span class="n">trainingFeatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">pathToTrainingImages</span> <span class="o">+</span> <span class="n">f</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
</code></pre></div>

<p><em>note that the path for this command is <a href="http://en.wikipedia.org/wiki/Path_(computing)#Example">absolute</a></em> </p>

<h2 id="toc_6">Resize the images</h2>

<p>Awesome, so we have our image, but we need to still resize it and we also need to flatten it into a 1D array, where every pixel&#39;s RGB value is an element in the array.</p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>
<span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">resize</span>
</code></pre></div>

<p>This will import the transform.resize utility from the scikit-image library that will allow us to resize the image.</p>

<p>Place the following command after <code>img = io.imread(filePath)</code> </p>

<div class="highlight"><pre><code class="python"><span class="n">img</span> <span class="o">=</span> <span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div>

<h2 id="toc_7">Convert the images into a list</h2>

<p>So first we&#39;ll need a list to store our feature lists in. An array of arrays for those of you who don&#39;t speak python. You&#39;ll pick up on it soon enough.</p>

<p>Then after the <code>img = resize(img, (50,50))</code> you&#39;ll want to include the following line to convert the image to a numpy array:</p>

<div class="highlight"><pre><code class="python"><span class="n">arrayOfImage</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</code></pre></div>

<h1 id="toc_8">Flatten the image list</h1>

<p>This isn&#39;t a flattened array though so we need to also flatten this. With python we have handy list comprehensions that will let us do this with single line using the following code:</p>

<div class="highlight"><pre><code class="python"><span class="n">flattenedArrayOfImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arrayOfImage</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
</code></pre></div>

<p>and lastly append this to the an array you&#39;ll save to run the your algorithms on later with the following line of code:</p>

<p>We need to hoist a variable for to store each of these arrays as an array of features that we will feed into our random forest.</p>

<p>So right after the line</p>

<div class="highlight"><pre><code class="python"><span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pathToTrainingImages</span><span class="p">):</span> 
</code></pre></div>

<p>You&#39;ll include this line of code:</p>

<div class="highlight"><pre><code class="python"><span class="n">trainingFeatures</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

<h2 id="toc_9">Convert list to a numpy array</h2>

<p>scikit-learn methods use the numpy library so we can&#39;t feed it a list we must first convert the tuple list we have just created into a numpy array. To do that we need to have import the numpy feature and alias it to something pretty like <code>np</code>. You want to do that by including the that with the following line after the the imports :</p>

<div class="highlight"><pre><code class="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</code></pre></div>

<p>and then make sure you write the next line of code out of the loop, to do this you have to make sure that you are not indented at all as python is white space sensitive and then include the following line to convert the list to a numpy array:</p>

<div class="highlight"><pre><code class="python"><span class="n">trainingFeature</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trainingFeatures</span><span class="p">)</span>
</code></pre></div>

<p>You should have something that looks like this:</p>

<div class="highlight"><pre><code class="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">color</span>
<span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">resize</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">print</span> <span class="s">&quot;opening training images&quot;</span>

<span class="n">pathToTrainingImages</span> <span class="o">=</span> <span class="s">&#39;/Users/kwyn/workspace/images_training_rev1/&#39;</span> 
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pathToTrainingImages</span><span class="p">):</span>   
    <span class="n">trainingFeatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">pathToTrainingImages</span> <span class="o">+</span> <span class="n">f</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">colorconv</span><span class="o">.</span><span class="n">rgb2grey</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">arrayOfImage</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">flattenedArrayOfImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arrayOfImage</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="n">trainingFeatures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flattenedArrayOfImage</span><span class="p">)</span>

<span class="n">trainingFeatures</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trainingFeatures</span><span class="p">)</span>
</code></pre></div>

<p>You&#39;ll have to repeat this code for the testing data. Just adjust the path name and the variable names for the <code>trainingFeatures</code> list to something like <code>testingFeatures</code></p>

<p>We&#39;re about half way there, keep going!</p>

<h1 id="toc_10">Step 2.</h1>

<h2 id="toc_11">Load the training data</h2>

<p>The training data is given to us in a <code>.csv</code> format. We can use a numpy module that to read the data directly into a numpy array with <code>np.loadtxt</code> which you can read up on in the numpy documentation for <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html">loadtxt</a> </p>

<p>This following code will load the csv data into a numpy array:</p>

<div class="highlight"><pre><code class="python"><span class="n">pathToTrainingData</span> <span class="o">=</span> <span class="s">&quot;/Users/kwyn/workspace/training_solutions_rev1.csv&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pathToTrainingData</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">numColumns</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">))</span>
<span class="n">trainingSolutions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">pathToTrainingData</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numColumns</span><span class="p">))</span>
</code></pre></div>

<p>We aren&#39;t interested in the header of the data being included in our numpy array so we remove that and we also exclude the the first columns with the galaxy IDs.</p>

<h2 id="toc_12">Train the algorithm</h2>

<p>Time for the exciting part! Using scikit-learn to train a random forest on the data. We&#39;ll first need to include the scikit-learn module for random forest regressors. You can do that by including the following with your import commands at the top of the file.</p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
</code></pre></div>

<p>If your interested in delving into what all the parameters mean you can check the <a href="http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html">sckit-learn documentation</a> </p>

<p>Then after all the previous code we will append the following code to actually train our algorithm.</p>

<div class="highlight"><pre><code class="python"><span class="n">rfr</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">max_features</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">rfr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">trainingFeatures</span><span class="p">,</span> <span class="n">trainingSolutions</span><span class="p">)</span>
</code></pre></div>

<p>Once this successfully runs then you&#39;ll have a trained algorithm!</p>

<h2 id="toc_13">Saving your algorithm with joblib</h2>

<p>One more module that you will most likely want to exploit is called <code>joblib</code> it allows us to directly save python objects and use them later after the script has finished running. In a later post I&#39;ll explain the difference between using this and pickling that is frequently used in python code. You can read more about the module <a href="http://pythonhosted.org//joblib/">here</a> </p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">sklearn.externals</span> <span class="kn">import</span> <span class="n">joblib</span>
</code></pre></div>

<p>Then right after the lines that train your algorithm write the following code setting the path to a file you wish to save your algorithm in I chose <code>Algorithms</code> for mine</p>

<div class="highlight"><pre><code class="python"><span class="n">algorithmName</span> <span class="o">=</span> <span class="s">&quot;myFirstForest&quot;</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">rfr</span><span class="p">,</span> <span class="s">&#39;Algorthims&#39;</span><span class="p">)</span>
</code></pre></div>

<p>As you iterate over different parameters and changing features in the future you&#39;ll probably change the name in  of the <code>algorithmName</code> variable. </p>

<p><em>Be sure to create this the Algorithms folder before running the python script</em></p>

<h1 id="toc_14">Running the produced algorithm on the test data</h1>

<p>This part is also easy. Just make sure to use joblib to save your prediction somewhere just in case writing to CSV doesn&#39;t go as planned.</p>

<p>Include the following code:</p>

<div class="highlight"><pre><code class="python"><span class="n">prediction</span> <span class="o">=</span> <span class="n">rfr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">testingFeatures</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="s">&#39;Solutions/firstPrediction&#39;</span><span class="p">)</span>
</code></pre></div>

<h1 id="toc_15">Step 3.</h1>

<h2 id="toc_16">Formatting the prediction data for submission</h2>

<p>The Kaggel competition expects the csv to be exported in a specific format so so that the tester they have can read the file correctly and perform the error calculations. For this we use numpy&#39;s <code>.savetxt</code> method. If you want to know more about how this works you can read up on numpys documentation for <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html">savetxt</a></p>

<p>For now just copy this code after your predictions have been made</p>

<div class="highlight"><pre><code class="python"><span class="n">galaxyIDs</span> <span class="o">=</span> <span class="n">galaxyIDs</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">prediction</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">galaxyIDs</span><span class="p">,</span> <span class="n">prediction</span><span class="p">))</span>
<span class="n">headerRow</span> <span class="o">=</span> <span class="s">&#39;GalaxyID,Class1.1,Class1.2,Class1.3,Class2.1,Class2.2,Class3.1,Class3.2,Class4.1,Class4.2,Class5.1,Class5.2,Class5.3,Class5.4,Class6.1,Class6.2,Class7.1,Class7.2,Class7.3,Class8.1,Class8.2,Class8.3,Class8.4,Class8.5,Class8.6,Class8.7,Class9.1,Class9.2,Class9.3,Class10.1,Class10.2,Class10.3,Class11.1,Class11.2,Class11.3,Class11.4,Class11.5,Class11.6&#39;</span>
<span class="n">formatting</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">&#39;</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">&#39;Predictions/firstPrediction.csv&#39;</span><span class="p">,</span> <span class="n">prediction</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">formatting</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">headerRow</span><span class="p">,</span> <span class="n">footer</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Submit the output file in the Solutions folder to the competition.</p>

<h1 id="toc_17">Step 4.</h1>

<h2 id="toc_18">Ta&#39;da you&#39;ve beaten the bench mark</h2>

<p>Hope this has helped those of you new to python and machine learning. If you&#39;re clever you&#39;ll start experimenting with the scikit-learn morphology library and tweaking features.</p>

<h1 id="toc_19">Complete Code</h1>

<p>Your code should look something like this:</p>

<div class="highlight"><pre><code class="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">color</span>
<span class="kn">from</span> <span class="nn">skimage.transform</span> <span class="kn">import</span> <span class="n">resize</span>
<span class="kn">from</span> <span class="nn">sklearn.externals</span> <span class="kn">import</span> <span class="n">joblib</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>

<span class="k">print</span> <span class="s">&quot;Opening training images&quot;</span>

<span class="n">pathToTrainingImages</span> <span class="o">=</span> <span class="s">&#39;/Users/kwyn/workspace/images_training_rev1/&#39;</span> 
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pathToTrainingImages</span><span class="p">):</span>   
    <span class="n">trainingFeatures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">pathToTrainingImages</span> <span class="o">+</span> <span class="n">f</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">colorconv</span><span class="o">.</span><span class="n">rgb2grey</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">arrayOfImage</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">flattenedArrayOfImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arrayOfImage</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="n">trainingFeatures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flattenedArrayOfImage</span><span class="p">)</span>

<span class="n">trainingFeatures</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trainingFeatures</span><span class="p">)</span>

<span class="k">print</span> <span class="n">trainingFeatures</span> 

<span class="k">print</span> <span class="s">&quot;Finished converting training images to numpy arrays&quot;</span>
<span class="k">print</span> <span class="s">&quot;Opening test images&quot;</span>

<span class="n">pathToTestingImages</span> <span class="o">=</span> <span class="s">&quot;/Users/kwyn/workspace/images_test_rev1/&quot;</span> 
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">pathToTestingImages</span><span class="p">):</span>
    <span class="n">testingFeatures</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">galaxyIDs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">pathToTestingImages</span> <span class="o">+</span> <span class="n">f</span>
        <span class="n">galaxyIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="n">galaxyIDs</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">colorconv</span><span class="o">.</span><span class="n">rgb2grey</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">arrayOfImage</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">flattenedArrayOfImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arrayOfImage</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
        <span class="n">testingFeatures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flattenedArrayOfImage</span><span class="p">)</span>

<span class="n">testingFeatures</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">testingFeatures</span><span class="p">)</span>
<span class="n">galaxyIDs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">galaxyIDs</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Finished converting test images to numpy array.&quot;</span>
<span class="k">print</span> <span class="s">&quot;Opening training data...&quot;</span>

<span class="n">pathToTrainingData</span> <span class="o">=</span> <span class="s">&quot;/Users/kwyn/workspace/training_solutions_rev1.csv&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pathToTrainingData</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">numColumns</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">))</span>
<span class="n">trainingSolutions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">pathToTrainingData</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numColumns</span><span class="p">))</span>

<span class="k">print</span> <span class="n">trainingSolutions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">print</span> <span class="s">&quot;Finished loading training data&quot;</span>  
<span class="k">print</span> <span class="s">&quot;starting random forest training&quot;</span>

<span class="n">rfr</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">max_features</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">oob_score</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="p">)</span>
<span class="n">rfr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">trainingFeatures</span><span class="p">,</span> <span class="n">trainingSolutions</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Finished random forest training&quot;</span>
<span class="k">print</span> <span class="s">&quot;Saving algorithm&quot;</span>

<span class="n">algorithmName</span> <span class="o">=</span> <span class="s">&quot;myFirstForest&quot;</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">rfr</span><span class="p">,</span> <span class="s">&#39;Algorthims/&#39;</span><span class="o">+</span><span class="n">algorithmName</span> <span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;starting testing...&quot;</span>

<span class="n">prediction</span> <span class="o">=</span> <span class="n">rfr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">testingFeatures</span><span class="p">)</span>
<span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="s">&#39;Solutions/firstPrediction&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;finished testing&quot;</span>
<span class="k">print</span> <span class="s">&quot;writing predictions to csv&quot;</span>

<span class="n">galaxyIDs</span> <span class="o">=</span> <span class="n">galaxyIDs</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">prediction</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">galaxyIDs</span><span class="p">,</span> <span class="n">prediction</span><span class="p">))</span>
<span class="n">headerRow</span> <span class="o">=</span> <span class="s">&#39;GalaxyID,Class1.1,Class1.2,Class1.3,Class2.1,Class2.2,Class3.1,Class3.2,Class4.1,Class4.2,Class5.1,Class5.2,Class5.3,Class5.4,Class6.1,Class6.2,Class7.1,Class7.2,Class7.3,Class8.1,Class8.2,Class8.3,Class8.4,Class8.5,Class8.6,Class8.7,Class9.1,Class9.2,Class9.3,Class10.1,Class10.2,Class10.3,Class11.1,Class11.2,Class11.3,Class11.4,Class11.5,Class11.6&#39;</span>
<span class="n">formatting</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">&#39;</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s">&#39;Predictions/firstPrediction.csv&#39;</span><span class="p">,</span> <span class="n">prediction</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">formatting</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">headerRow</span><span class="p">,</span> <span class="n">footer</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;finished you can find you predictions in Predictions folder&quot;</span>
</code></pre></div>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://www.harleykwyn.com/tags/#machine learning" title="Pages tagged machine learning" class="tag">machine learning</a><a href="http://www.harleykwyn.com/tags/#python" title="Pages tagged python" class="tag">python</a><a href="http://www.harleykwyn.com/tags/#image processing" title="Pages tagged image processing" class="tag">image processing</a></span>
        <span><a href="http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/" rel="bookmark" title="So You Want to be a Kaggel Wizard">So You Want to be a Kaggel Wizard</a> was published on <span class="entry-date date published updated"><time datetime="2014-02-27T00:00:00+00:00">February 27, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-02-27">02/27/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://www.harleykwyn.com/about/" title="About Kwyn Alice Meagher">Kwyn Alice Meagher</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/" title="Share on Facebook"><span class="count"><i class="icon-facebook-sign"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/" title="Share on Twitter"><span class="count"><i class="icon-twitter-sign"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://www.harleykwyn.com/so-you-want-to-be-a-kaggel-wizard/" title="Share on Google Plus"><span class="count"><i class="icon-google-plus-sign"></i> +1</span></a></li>
          </ul>
          <!-- google comment attempted to be added here attempt -->
        </div><!-- /.social-share -->
      </footer>
      <div id="comments"></div>
    </div><!-- /.entry-content -->
   
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://www.harleykwyn.com/machine-learning-work-flow/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://www.harleykwyn.com/machine-learning-work-flow/" title="Machine Learning Work Flow for Hackers">Machine Learning Work Flow for Hackers</a></h3>
          <p>Learn ALL the things <a href="http://www.harleykwyn.com/machine-learning-work-flow/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://www.harleykwyn.com/recursion-vs-closure-part-2/" title="Recursion Functional vs Closure Part II">Recursion Functional vs Closure Part II</a></h4>
            <span>Published on January 28, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://www.harleykwyn.com/google-comments-in-jekyll/" title="Google Comments in Jekyll">Google Comments in Jekyll</a></h4>
            <span>Published on January 28, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 <a href="https://plus.google.com/+KwynMeagher?rel=author"> Kwyn Alice Meagher </a>. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">HPSTR Theme</a>. </span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://www.harleykwyn.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://www.harleykwyn.com/assets/js/scripts.min.js"></script>

<script type="text/javascript">
    // /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = ''; // required: replace example with your forum shortname

    // /* * * DON'T EDIT BELOW THIS LINE * * */
    // (function() {
    //     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    //     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    //     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    // })();

    // /* * * DON'T EDIT BELOW THIS LINE * * */
    // (function () {
    //     var s = document.createElement('script'); s.async = true;
    //     s.type = 'text/javascript';
    //     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    //     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    // }());

</script>
<!-- <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
 -->
	        
 <script>
      var width = $(".entry-content").width() - 20;
      gapi.comments.render('comments', {
          href: window.location,
          width: width,
          first_party_property: 'BLOGGER',
          view_type: 'FILTERED_POSTMOD'
      });
  </script>
</body>
</html>
